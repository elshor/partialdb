(function(r){"object"===typeof exports&&"undefined"!==typeof module?module.exports=r():"function"===typeof define&&define.amd?define([],r):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).rfc6902=r()})(function(){return function h(n,d,k){function m(c,a){if(!d[c]){if(!n[c]){var b="function"==typeof require&&require;if(!a&&b)return b(c,!0);if(f)return f(c,!0);b=Error("Cannot find module '"+c+"'");throw b.code="MODULE_NOT_FOUND",b;}b=d[c]={exports:{}};
n[c][0].call(b.exports,function(b){var a=n[c][1][b];return m(a?a:b)},b,b.exports,h,n,d,k)}return d[c].exports}for(var f="function"==typeof require&&require,l=0;l<k.length;l++)m(k[l]);return m}({1:[function(h,n,d){function k(b,c){var a={},g;for(g in b)a[g]=1;for(var e in c)delete a[e];return Object.keys(a)}function m(b){var c={};b.forEach(function(b){for(var a in b)c[a]=(c[a]||0)+1});b=b.length;for(var a in c)c[a]<b&&delete c[a];return Object.keys(c)}function f(b){return void 0===b?"undefined":null===
b?"null":Array.isArray(b)?"array":typeof b}function l(c,a,d){function l(b,g){var e=f[b+","+g];if(void 0===e){if(q(c[b-1],a[g-1]))e=l(b-1,g-1);else{e=[];if(0<b){var d=l(b-1,g);e.push({operations:d.operations.concat({op:"remove",index:b-1}),cost:d.cost+1})}0<g&&(d=l(b,g-1),e.push({operations:d.operations.concat({op:"add",index:b-1,value:a[g-1]}),cost:d.cost+1}));0<b&&0<g&&(d=l(b-1,g-1),e.push({operations:d.operations.concat({op:"replace",index:b-1,original:c[b-1],value:a[g-1]}),cost:d.cost+1}));e=e.sort(function(b,
c){return b.cost-c.cost})[0]}f[b+","+g]=e}return e}var f={"0,0":{operations:[],cost:0}},k=isNaN(c.length)||0>=c.length?0:c.length,h=isNaN(a.length)||0>=a.length?0:a.length,h=l(k,h).operations.reduce(function(c,a){var p=g(c,2),l=p[0],p=p[1];if("add"===a.op){var f=a.index+1+p,f={op:a.op,path:d.add(f<k+p?String(f):"-").toString(),value:a.value};return[l.concat(f),p+1]}if("remove"===a.op)return f={op:a.op,path:d.add(String(a.index+p)).toString()},[l.concat(f),p-1];f=d.add(String(a.index+p));f=b(a.original,
a.value,f);return[l.concat.apply(l,e(f)),p]},[[],0]);return g(h,2)[0]}function c(a,c,g){var d=[];k(a,c).forEach(function(b){d.push({op:"remove",path:g.add(b).toString()})});k(c,a).forEach(function(b){d.push({op:"add",path:g.add(b).toString(),value:c[b]})});m([a,c]).forEach(function(f){d.push.apply(d,e(b(a[f],c[f],g.add(f))))});return d}function a(b,a,c){return!q(b,a)?[{op:"replace",path:c.toString(),value:a}]:[]}function b(b,g,e){var d=f(b),q=f(g);return"array"==d&&"array"==q?l(b,g,e):"object"==d&&
"object"==q?c(b,g,e):a(b,g,e)}var g=function(b,a){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b)){for(var c=[],g=b[Symbol.iterator](),e;!(e=g.next()).done&&!(c.push(e.value),a&&c.length===a););return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");},e=function(b){if(Array.isArray(b)){for(var a=0,c=Array(b.length);a<b.length;a++)c[a]=b[a];return c}return Array.from(b)};d.isDestructive=function(b){b=b.op;return"remove"===b||"replace"===b||"copy"===b||"move"===
b};d.subtract=k;d.intersection=m;d.objectType=f;d.diffArrays=l;d.diffObjects=c;d.diffValues=a;d.diffAny=b;Object.defineProperty(d,"__esModule",{value:!0});var q=h("./equal").compare},{"./equal":2}],2:[function(h,n,d){function k(c,a){for(var b=[],g=0,e=c.length;g<e;g++)b.push([c[g],a[g]]);return b}function m(c,a){return c.length!==a.length?!1:k(c,a).every(function(b){return l(b[0],b[1])})}function f(c,a){var b=Object.keys(c),g=Object.keys(a);return!m(b,g)?!1:b.every(function(b){return l(c[b],a[b])})}
function l(c,a){return c===a?!0:Array.isArray(c)&&Array.isArray(a)?m(c,a):Object(c)===c&&Object(a)===a?f(c,a):!1}d.compare=l;Object.defineProperty(d,"__esModule",{value:!0})},{}],3:[function(h,n,d){var k=function c(a,b,g){var e=Object.getOwnPropertyDescriptor(a,b);if(void 0===e)return a=Object.getPrototypeOf(a),null===a?void 0:c(a,b,g);if("value"in e&&e.writable)return e.value;b=e.get;return void 0===b?void 0:b.call(g)},m=function(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+
typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(c.__proto__=a)},f=function(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function");};Object.defineProperty(d,"__esModule",{value:!0});d.MissingError=function(c){function a(b){f(this,a);k(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,"Value required at path: "+b);this.path=b;this.name=this.constructor.name}m(a,c);return a}(Error);d.InvalidOperationError=
function(c){function a(b){f(this,a);k(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,"Invalid operation: "+b);this.op=b;this.name=this.constructor.name}m(a,c);return a}(Error);d.TestError=function(c){function a(b,c){f(this,a);k(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,"Test failed: "+b+" != "+c);this.actual=b;this.expected=c;this.name=this.constructor.name;this.actual=b;this.expected=c}m(a,c);return a}(Error)},{}],4:[function(h,n,d){function k(b,c){var a=
f.fromJSON(c).evaluate(b);if(void 0!==a)return{op:"test",path:c,value:a.value}}d.applyPatch=function(b,c){return c.map(function(c){var a=l[c.op];return void 0===a?new m(c.op):a(b,c)})};d.createPatch=function(b,a){var e=new f;return c(b,a,e)};d.createTests=function(b,c){var e=[];c.filter(a).forEach(function(c){var a=k(b,c.path);a&&e.push(a);"from"in c&&(c=k(b,c.from))&&e.push(c)});return e};Object.defineProperty(d,"__esModule",{value:!0});var m=h("./errors").InvalidOperationError,f=h("./pointer").Pointer,
l=function(b){return b&&b.__esModule?b:{"default":b}}(h("./patch"));h=h("./diff");var c=h.diffAny,a=h.isDestructive},{"./diff":1,"./errors":3,"./patch":5,"./pointer":6}],5:[function(h,n,d){function k(b,c,a){Array.isArray(b)?"-"==c?b.push(a):b.splice(c,0,a):b[c]=a}function m(b,c){Array.isArray(b)?b.splice(c,1):delete b[c]}d.add=function(b,a){var e=f.fromJSON(a.path).evaluate(b,!0);if(void 0===e.parent)return new c(a.path);k(e.parent,e.key,a.value);return null};d.remove=function(b,a){var e=f.fromJSON(a.path).evaluate(b);
if(void 0===e.value)return new c(a.path);m(e.parent,e.key);return null};d.replace=function(b,a){var e=f.fromJSON(a.path).evaluate(b);if(void 0===e.value)return new c(a.path);e.parent[e.key]=a.value;return null};d.move=function(b,a){var e=f.fromJSON(a.from).evaluate(b);if(void 0===e.value)return new c(a.from);var d=f.fromJSON(a.path).evaluate(b);if(void 0===d.parent)return new c(a.path);m(e.parent,e.key);k(d.parent,d.key,e.value);return null};d.copy=function(b,a){var e=f.fromJSON(a.from).evaluate(b);
if(void 0===e.value)return new c(a.from);var d=f.fromJSON(a.path).evaluate(b);if(void 0===d.parent)return new c(a.path);m(e.parent,e.key);k(d.parent,d.key,e.value);return null};d.test=function(b,c){var e=f.fromJSON(c.path).evaluate(b);return!l(e.value,c.value)?new a(e.value,c.value):null};Object.defineProperty(d,"__esModule",{value:!0});var f=h("./pointer").Pointer,l=h("./equal").compare;h=h("./errors");var c=h.MissingError,a=h.TestError},{"./equal":2,"./errors":3,"./pointer":6}],6:[function(h,n,
d){function k(d){return d.replace(/~1/g,"/").replace(/~0/g,"~")}function m(d){return d.replace(/~/g,"~0").replace(/\//g,"~1")}var f=function(){function d(c,a){for(var b in a){var g=a[b];g.configurable=!0;g.value&&(g.writable=!0)}Object.defineProperties(c,a)}return function(c,a,b){a&&d(c.prototype,a);b&&d(c,b);return c}}();Object.defineProperty(d,"__esModule",{value:!0});d.Pointer=function(){function d(c){c=void 0===c?[""]:c;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
this.tokens=c}f(d,{toString:{value:function(){return this.tokens.map(m).join("/")}},evaluate:{value:function(c,a){for(var b=void 0===a?!1:a,d=null,e=null,f=1,h=this.tokens.length;f<h;f++)d=c,e=this.tokens[f],"-"===e&&(f<h-1&&b)&&(d.push({}),e=(d.length-1).toString()),void 0===d[e]&&(f<h-1&&b)&&(d[e]="-"===this.tokens[f+1]?[]:{}),c=(d||{})[e];return{parent:d,key:e,value:c}}},push:{value:function(c){this.tokens.push(c)}},add:{value:function(c){c=this.tokens.concat(String(c));return new d(c)}}},{fromJSON:{value:function(c){var a=
c.split("/").map(k);if(""!==a[0])throw Error("Invalid JSON Pointer: "+c);return new d(a)}}});return d}()},{}]},{},[4])(4)});
